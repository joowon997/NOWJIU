<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" 
		xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
		layout:decorate="~{layouts/administrator}">
		
	<section layout:fragment="contents">
		<h1 class="text-center mt-3">상품 등록</h1>
		<article class="mt-3 administrator-main">
			<h5>상품명</h5>
			<input type="text" class="form-control mb-1">
			<h5>가격</h5>
			<input type="text" class="form-control mb-1">
			<h5>브랜드</h5>
			<div class="d-flex">
				<select id="brandSelect" class="form-control mb-1 mr-2">
					<option>브랜드명</option>
					<option value="direct">직접입력</option>
				</select>
				<input id="brandInput" class="form-control mb-1 d-none">
			</div>
			<h5>카테고리</h5>
			<div class="d-flex">
				<select id="categoriSelect" class="form-control mb-1 mr-2">
					<option>카테고리</option>
					<option value="direct">직접입력</option>
				</select>
				<input id="categoriInput" class="form-control mb-1 d-none">
			</div>
			<h5>사이즈</h5>
			<div class="border-secondary border-bottom border-top">
				<form class="border-secondary border-bottom border-top">
					<div class="size-warp">
						<div class="size-list d-flex">
							<div class="size-select d-flex">
								<select class="select-box create-cartegori form-control mx-3 my-1" data-size-select="0">
									<option value="A-0">A-0</option>
									<option value="A-1">A-1</option>
									<option value="A-2">A-2</option>
									<option value="direct">직접입력</option>
								</select>
								<input type="text" id="sizeDirect0" data-size-select="0" class="create-cartegori form-control mr-3 my-1 d-none">
							</div>
							<div class="d-flex align-items-center border-left border-secondary">
								<input type="text" data-size-select="0" class="form-control mx-2 my-1"><span>개</span>
							</div>
							<button type="button" class="size-add btn btn-success ml-3 my-1" id="sizeAddBtn">추가</button>
						</div>
					</div>
				</form>
			</div>
			<h5>상세설명</h5>
			<textarea class="form-control mb-1" rows="" cols=""></textarea>
			<div class="border-secondary border-top mt-3">
				<div class="d-flex border-secondary border-bottom border-top">
					<h5 class="create-cartegori mx-3 mt-2">메인이미지</h5>
					<div class="border-left border-secondary">
						<input type="file" class="ml-3 my-1" id="imgInput">
					</div>
				</div>
			</div>
			<div class="bg-dark d-none" id="imgArea">
			</div>
			<div class="d-flex border-secondary border-bottom">
				<h5 class="create-cartegori mx-3 mt-2">첨부파일 1</h5>
				<div class="border-left border-secondary">
						<input type="file" class="ml-3 my-1" id="uploadBtn" multiple accept=".jpeg, .jpg, .png">
				</div>
			</div>
			
		</article>
	</section>
	
	<script layout:fragment="script">
		$(document).ready(function(){
			
			
			
			// 이미지 미리보기
			$("#imgInput").on("change",function(event){
				const file = event.target.files;
				
				var image = new Image();
				var ImageTempUrl = window.URL.createObjectURL(file[0]);
	
				image.src = ImageTempUrl;
	
				$("#imgArea").append(image);
			});
			
			
			// 카테고리 직접입력
			$("#brandSelect").on("change",function(){
                if($(this).val() == "direct") {
                	$("#brandiInput").removeClass("d-none");
                }else {
                	$("#brandInput").addClass("d-none");
                }
			});

			// 카테고리 직접입력
			$("#categoriSelect").on("change",function(){
                if($(this).val() == "direct") {
                	$("#categoriInput").removeClass("d-none");
                }else {
                	$("#categoriInput").addClass("d-none");
                }
			});
			
			// 사이즈 직접입력
			$(document).on("change", ".select-box",function(){
				
				let selectId = $(this).data("size-select");
				let drectId= $("#sizeDirect"+ selectId).data("size-select");
				
                if($(this).val() == "direct" && selectId == drectId) {
                	$("#sizeDirect" + drectId).removeClass("d-none");
                }else {
                    $("#sizeDirect"+drectId).addClass("d-none");
                }
			})
			
			
			// 사이즈 추가
			var sizeCount = 0;
			const sizeCountmax = 5;
			$(".size-add").on("click", function(e){
				e.preventDefault(); // 페이지 리로드 방지
			    if (sizeCount < sizeCountmax) { // 최대 필드 수 체크
			    	sizeCount++; // 필드 수 증가
			        // 새 입력 필드 추가
			        $(".size-warp").append(
		        		"<div class='size-list d-flex border-secondary border-top'>"
							+"<div class='size-select d-flex'>"
								+"<select class='select-box create-cartegori form-control mx-3 my-1' data-size-select='"+sizeCount+"'>"
									+"<option value='A-0'>A-0</option>"
									+"<option value='A-1'>A-1</option>"
									+"<option value='A-2'>A-2</option>"
									+"<option value='direct'>직접입력</option>"
								+"</select>"
								+"<input type='text' id='sizeDirect"+ sizeCount +"' data-size-select='"+ sizeCount +"' class='size-direct create-cartegori form-control mr-3 my-1 d-none'>"
							+"</div>"
							+"<div class='d-flex align-items-center border-left border-secondary'>"
								+"<input type='text' data-size-select='"+ sizeCount +"' class='form-control mx-2 my-1'><span>개</span>"
							+"</div>"
                            +"<a href='javascript:void(0);'  class='size-delete btn btn-danger ml-3 my-1'>삭제</a>"
							+"</div>"
			        );
			    }
			});
			
			// 사이즈 삭제
			$(".size-warp").on("click", ".size-delete", function(e){
				e.preventDefault(); // 페이지 리로드 방지
			 	$(this).parent(".size-list").remove(); // 필드 제거
				sizeCount--; // 필드 수 감소				
			});
			
			
			
		});
	</script>
</html>